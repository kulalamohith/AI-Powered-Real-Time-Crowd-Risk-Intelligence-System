{"ast":null,"code":"var _jsxFileName = \"C:\\\\tester\\\\frontend\\\\src\\\\components\\\\MapComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = ({\n  heatmapData\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  useEffect(() => {\n    if (!mapInstanceRef.current) {\n      // Initialize map\n      mapInstanceRef.current = L.map(mapRef.current).setView([12.9716, 77.5946], 13);\n\n      // Add OpenStreetMap tiles\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '© OpenStreetMap contributors'\n      }).addTo(mapInstanceRef.current);\n    }\n\n    // Clear existing markers\n    mapInstanceRef.current.eachLayer(layer => {\n      if (layer instanceof L.Marker) {\n        mapInstanceRef.current.removeLayer(layer);\n      }\n    });\n\n    // Add markers for each gate\n    heatmapData.forEach(gate => {\n      // Get gate coordinates from the data\n      const coordinates = getGateCoordinates(gate._id);\n      if (coordinates) {\n        const color = getRiskColor(gate.color || 'green');\n        const icon = L.divIcon({\n          className: 'custom-marker',\n          html: `<div style=\"\n            background-color: ${color};\n            width: 20px;\n            height: 20px;\n            border-radius: 50%;\n            border: 3px solid white;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n          \"></div>`,\n          iconSize: [20, 20],\n          iconAnchor: [10, 10]\n        });\n        const marker = L.marker([coordinates.lat, coordinates.lng], {\n          icon\n        }).addTo(mapInstanceRef.current).bindPopup(`\n            <div style=\"text-align: center;\">\n              <strong>Gate ${gate._id}</strong><br/>\n              Density: ${gate.density}<br/>\n              Risk: ${gate.tag || 'Safe'}<br/>\n              Level: ${gate.riskLevel || 1}\n            </div>\n          `);\n      }\n    });\n  }, [heatmapData]);\n  const getGateCoordinates = gateId => {\n    // Gate coordinates mapping\n    const coordinates = {\n      'G1': {\n        lat: 12.9784,\n        lng: 77.5996\n      },\n      // Stadium North\n      'G2': {\n        lat: 12.9762,\n        lng: 77.5990\n      },\n      // Stadium South\n      'G3': {\n        lat: 12.9775,\n        lng: 77.6010\n      },\n      // Stadium East\n      'G4': {\n        lat: 12.9770,\n        lng: 77.5975\n      },\n      // Stadium West\n      // Metro coordinates (slightly different area)\n      'G5': {\n        lat: 12.9758,\n        lng: 77.6101\n      },\n      // Metro Entry 1\n      'G6': {\n        lat: 12.9760,\n        lng: 77.6095\n      },\n      // Metro Entry 2\n      'G7': {\n        lat: 12.9762,\n        lng: 77.6103\n      },\n      // Metro Exit 1\n      'G8': {\n        lat: 12.9756,\n        lng: 77.6098\n      },\n      // Metro Exit 2\n      // Mall coordinates\n      'G9': {\n        lat: 13.0116,\n        lng: 77.5556\n      },\n      // Mall Main\n      'G10': {\n        lat: 13.0120,\n        lng: 77.5560\n      },\n      // Mall Parking\n      'G11': {\n        lat: 13.0118,\n        lng: 77.5558\n      },\n      // Mall Food Court\n      'G12': {\n        lat: 13.0114,\n        lng: 77.5552\n      } // Mall Emergency\n    };\n    return coordinates[gateId];\n  };\n  const getRiskColor = color => {\n    const colorMap = {\n      'green': '#28a745',\n      'yellow': '#ffc107',\n      'orange': '#fd7e14',\n      'darkred': '#dc3545',\n      'red': '#6f42c1'\n    };\n    return colorMap[color] || '#28a745';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 10\n  }, this);\n};\n_s(MapComponent, \"HGOaeZ8o3YxgkGMPZTdc6qMIX/A=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","L","jsxDEV","_jsxDEV","MapComponent","heatmapData","_s","mapRef","mapInstanceRef","current","map","setView","tileLayer","attribution","addTo","eachLayer","layer","Marker","removeLayer","forEach","gate","coordinates","getGateCoordinates","_id","color","getRiskColor","icon","divIcon","className","html","iconSize","iconAnchor","marker","lat","lng","bindPopup","density","tag","riskLevel","gateId","colorMap","ref","style","height","width","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/tester/frontend/src/components/MapComponent.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport L from 'leaflet';\r\n\r\nconst MapComponent = ({ heatmapData }) => {\r\n  const mapRef = useRef(null);\r\n  const mapInstanceRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!mapInstanceRef.current) {\r\n      // Initialize map\r\n      mapInstanceRef.current = L.map(mapRef.current).setView([12.9716, 77.5946], 13);\r\n      \r\n      // Add OpenStreetMap tiles\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        attribution: '© OpenStreetMap contributors'\r\n      }).addTo(mapInstanceRef.current);\r\n    }\r\n\r\n    // Clear existing markers\r\n    mapInstanceRef.current.eachLayer((layer) => {\r\n      if (layer instanceof L.Marker) {\r\n        mapInstanceRef.current.removeLayer(layer);\r\n      }\r\n    });\r\n\r\n    // Add markers for each gate\r\n    heatmapData.forEach((gate) => {\r\n      // Get gate coordinates from the data\r\n      const coordinates = getGateCoordinates(gate._id);\r\n      \r\n      if (coordinates) {\r\n        const color = getRiskColor(gate.color || 'green');\r\n        const icon = L.divIcon({\r\n          className: 'custom-marker',\r\n          html: `<div style=\"\r\n            background-color: ${color};\r\n            width: 20px;\r\n            height: 20px;\r\n            border-radius: 50%;\r\n            border: 3px solid white;\r\n            box-shadow: 0 2px 4px rgba(0,0,0,0.3);\r\n          \"></div>`,\r\n          iconSize: [20, 20],\r\n          iconAnchor: [10, 10]\r\n        });\r\n\r\n        const marker = L.marker([coordinates.lat, coordinates.lng], { icon })\r\n          .addTo(mapInstanceRef.current)\r\n          .bindPopup(`\r\n            <div style=\"text-align: center;\">\r\n              <strong>Gate ${gate._id}</strong><br/>\r\n              Density: ${gate.density}<br/>\r\n              Risk: ${gate.tag || 'Safe'}<br/>\r\n              Level: ${gate.riskLevel || 1}\r\n            </div>\r\n          `);\r\n      }\r\n    });\r\n  }, [heatmapData]);\r\n\r\n  const getGateCoordinates = (gateId) => {\r\n    // Gate coordinates mapping\r\n    const coordinates = {\r\n      'G1': { lat: 12.9784, lng: 77.5996 }, // Stadium North\r\n      'G2': { lat: 12.9762, lng: 77.5990 }, // Stadium South\r\n      'G3': { lat: 12.9775, lng: 77.6010 }, // Stadium East\r\n      'G4': { lat: 12.9770, lng: 77.5975 }, // Stadium West\r\n      // Metro coordinates (slightly different area)\r\n      'G5': { lat: 12.9758, lng: 77.6101 }, // Metro Entry 1\r\n      'G6': { lat: 12.9760, lng: 77.6095 }, // Metro Entry 2\r\n      'G7': { lat: 12.9762, lng: 77.6103 }, // Metro Exit 1\r\n      'G8': { lat: 12.9756, lng: 77.6098 }, // Metro Exit 2\r\n      // Mall coordinates\r\n      'G9': { lat: 13.0116, lng: 77.5556 }, // Mall Main\r\n      'G10': { lat: 13.0120, lng: 77.5560 }, // Mall Parking\r\n      'G11': { lat: 13.0118, lng: 77.5558 }, // Mall Food Court\r\n      'G12': { lat: 13.0114, lng: 77.5552 }, // Mall Emergency\r\n    };\r\n    \r\n    return coordinates[gateId];\r\n  };\r\n\r\n  const getRiskColor = (color) => {\r\n    const colorMap = {\r\n      'green': '#28a745',\r\n      'yellow': '#ffc107',\r\n      'orange': '#fd7e14',\r\n      'darkred': '#dc3545',\r\n      'red': '#6f42c1'\r\n    };\r\n    return colorMap[color] || '#28a745';\r\n  };\r\n\r\n  return <div ref={mapRef} style={{ height: '100%', width: '100%' }} />;\r\n};\r\n\r\nexport default MapComponent; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}